<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Spring Thyme Subscription Starter Manager</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" media="all" th:href="@{/css/subscriptions.css}"/>
</head>

<body>

<div>
    <img alt="STSM logo" title="STSM logo" th:src="@{/img/stsmlogo.png}"/>
    <form th:action="@{/logout}" method="POST">
        <input type="submit" value="Logout"/>
    </form>
</div>

<div class="subscriptions" th:unless="${#lists.isEmpty(subscriptions)}">

    <h2>List of Subscriptions</h2>

    <table>
        <thead>
        <tr>
            <th>Name</th>
            <th>Link</th>
            <th>Category</th>
            <th>Price</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="subscription : ${subscriptions}">
            <td><span th:text="${subscription.service.name}">Name</span></td>
            <td th:text="${subscription.service.link}">Link</td>
            <td th:text="${subscription.service.category.name}">Category</td>
            <td><span th:text="${subscription.price}"> Price </span></td>
            <td><a href="#" th:href="@{/subscriptions/edit/{id}(id = ${subscription.id})}">Edit</a>
            <a href="#" th:href="@{/subscriptions/remove/{id}(id = ${subscription.id})}" name="delete">Delete</a>
            </td>
        </tr>
        </tbody>
    </table>

</div>


<div>

    <h2>Add new subscription</h2>

    <form action="#" th:action="@{/subscriptions(user=${username})}" th:object="${subscription}" method="post">

        <fieldset>

            <legend>Subscription</legend>

          <!--  <ul th:if="${#fields.hasErrors('*')}" class="errorlist">
                <li th:each="err : ${#fields.errors('*')}" th:text="${err}">Input is incorrect</li>
            </ul>
-->

            <div>
                <label for="Name"> Name</label>
                <input type="text" th:field="${subscription.service.name}"/>
            </div>
            <div>
                <label for="Link">Link</label>
                <input type="text" th:field="${subscription.service.link}"/>
            </div>
            <div>
                <label for="Category">
                    <span>Category</span>
                </label>
                <input type="text" th:field="${subscription.service.category.name}"/>
            </div>
            <div>
                <label for="Price">Price</label>
                <input type="text" th:field="${subscription.price}"/>
            </div>
            <div class="submit">
                <button type="submit" >Add subscription</button>
            </div>

        </fieldset>

    </form>

</div>

</body>
</html>